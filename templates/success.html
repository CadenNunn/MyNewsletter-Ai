{% extends "base.html" %}
{% block title %}Newsletter Scheduled - Memoraid{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 bg-[var(--color-bg)]">
  <div class="bg-[var(--color-card)] rounded-xl shadow-lg max-w-md w-full p-8 text-center">

    <div class="text-4xl mb-4 text-[var(--color-accent)]">üéâ</div>

    <h1 class="heading-2 mb-2">Your Newsletter is Scheduled!</h1>
    <p class="body-text mb-4">We‚Äôve saved your content and scheduled it for delivery.</p>

    <div class="bg-[var(--color-accent-bg)] text-[var(--color-text)] text-sm py-3 px-4 rounded mb-6">
      <span class="font-medium">First send:</span>
      <span id="local-send-time">Loading...</span>
    </div>

    <!-- Send timing note -->
    <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-accent-bg)] text-[var(--color-text)] text-sm p-4 text-left mb-6">
      <div class="font-semibold mb-1">‚è±Ô∏è Heads up</div>
      <p class="text-[var(--color-muted)]">
        The email may take <span class="font-medium">1‚Äì2 minutes</span> to populate in the system and actually send.
        If you chose <span class="font-medium">‚ÄúSend now‚Äù</span>, expect it shortly. If you scheduled a time, it‚Äôll go out at the time shown above.
      </p>
    </div>


    <div class="space-y-3">
      <a href="/dashboard" class="btn-primary w-full block text-center">Back to Home</a>
      <a href="/choose-newsletter-type" class="btn-outline w-full block text-center">Create Another</a>
    </div>
  </div>
</div>

<script>
  const utc = "{{ next_send }}";
  try {
    const local = new Date(utc).toLocaleString(undefined, {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: 'numeric',
      minute: '2-digit',
      hour12: true,
    });
    document.getElementById("local-send-time").textContent = local;
  } catch (e) {
    document.getElementById("local-send-time").textContent = "Invalid time.";
  }
</script>
{% endblock %}
