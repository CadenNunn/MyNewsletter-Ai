{% extends "base.html" %}
{% block title %}Newsletter Scheduled - Memoraid{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 bg-[var(--color-bg)]">
  <div class="bg-[var(--color-card)] rounded-xl shadow-lg max-w-md w-full p-8 text-center">

    <div class="text-4xl mb-4 text-[var(--color-accent)]">üéâ</div>

    <h1 class="heading-2 mb-2">Your Newsletter is Scheduled!</h1>
    <p class="body-text mb-4">We‚Äôve saved your content and scheduled it for delivery.</p>

    <div class="bg-[var(--color-accent-bg)] text-[var(--color-text)] text-sm py-3 px-4 rounded mb-6">
      <span class="font-medium">First send:</span>
      <span id="local-send-time">Loading...</span>
    </div>

    <!-- Deliverability note -->
    <div class="rounded-lg border border-[var(--color-border)] bg-[var(--color-card)] text-[var(--color-text)] text-sm p-4 text-left mb-6">
      <div class="font-semibold mb-1">Not seeing the email in Primary?</div>
      <ul class="list-disc pl-5 space-y-1 text-[var(--color-muted)]">
        <li>Check your <span class="font-medium">Promotions</span> or <span class="font-medium">Updates</span> tabs.</li>
        <li>Drag the email to <span class="font-medium">Primary</span> and click ‚ÄúYes‚Äù to do this for future emails.</li>
        <li>Add our address to your contacts and reply to the first email ‚Äî this helps Gmail route it to Primary.</li>
      </ul>
    </div>

    <div class="space-y-3">
      <a href="/dashboard" class="btn-primary w-full block text-center">Back to Home</a>
      <a href="/choose-newsletter-type" class="btn-outline w-full block text-center">Create Another</a>
    </div>
  </div>
</div>

<script>
  const utc = "{{ next_send }}";
  try {
    const local = new Date(utc).toLocaleString(undefined, {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: 'numeric',
      minute: '2-digit',
      hour12: true,
    });
    document.getElementById("local-send-time").textContent = local;
  } catch (e) {
    document.getElementById("local-send-time").textContent = "Invalid time.";
  }
</script>
{% endblock %}
