{% extends "base.html" %}
{% block title %}Generating Newsletter...{% endblock %}

{% block content %}
<div class="min-h-screen flex flex-col items-center justify-center px-4 text-center">
  <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mb-6"></div>

  <h1 class="heading-1 mb-4">Creating Your Newsletter...</h1>
  <p class="text-gray-700 text-lg mb-2">Topic: <strong>{{ topic }}</strong></p>
  <p class="text-gray-700 text-lg mb-2">Audience: <strong>{{ demographic }}</strong></p>

  <p class="text-gray-500 mt-4 text-sm italic" id="loading-message">Analyzing your topic...</p>
</div>

<script>
  const messages = [
    "Analyzing your topic...",
    "Writing your intro...",
    "Outlining sections...",
    "Refining tone and style...",
    "Almost ready!"
  ];
  let i = 0;
  setInterval(() => {
    document.getElementById("loading-message").textContent = messages[i % messages.length];
    i++;
  }, 2000);

  // Auto-trigger GPT route after short delay
  setTimeout(() => {
    window.location.href = "/generate-newsletter";
  }, 2000);  // can increase to 3000â€“5000ms if needed
</script>
{% endblock %}
